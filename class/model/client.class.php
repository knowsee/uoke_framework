<?phpif (!defined('IN_UOKE')) {    exit('Wrong!!');}class Model_Client extends Model {    public $getInput = array();    protected $pageNum = '10';    protected $defaultTemplate = 'admin/client';    protected $privateUri = array(        'clientEditUri' => 'adminClient.php?act=edit',        'clientListUri' => 'adminClient.php?act=list',        'clientProjectUri' => 'adminClient.php?act=projectInfo',    );    public function list_Action() {        list($total, $userList) = control_user::getList(1, 100);        $this->modelDisplay(array('userList' => $userList));    }    public function edit_Action() {        $userId = $this->getInput['userId'];        if ($userId) {            $userInfo = control_user::getUserInfo($userId);            if (!$userInfo) {                showmsg(control_returnCode::FORM_INFO_EMPTY);            }        }        if (app::v('checkallow', 'submit')) {            if ($userInfo) {                $status = control_user::editUser($userId, array(                            control_user::TABLE_REALNAME => $this->getInput[control_user::TABLE_REALNAME],                            control_user::TABLE_EMAIL => $this->getInput[control_user::TABLE_EMAIL],                            control_user::TABLE_PASSWORD => $this->getInput[control_user::TABLE_PASSWORD],                ));            } else {                $status = control_user::regUser(array(                            control_user::TABLE_REALNAME => $this->getInput[control_user::TABLE_REALNAME],                            control_user::TABLE_EMAIL => $this->getInput[control_user::TABLE_EMAIL],                            control_user::TABLE_PASSWORD => $this->getInput[control_user::TABLE_PASSWORD],                ));            }            showmsg($status, array(), $this->privateUri['clientListUri']);        } else {            $this->modelDisplay(array('userInfo' => $userInfo, 'formTitle' => !$userInfo ? '新增客户' : '编辑客户', 'userId' => $userId));        }    }        public function projectInfo_Action() {                $userId = $this->getInput['userId'];        if ($userId) {            $userInfo = control_user::getUserInfo($userId);            if (!$userInfo) {                showmsg(control_returnCode::FORM_INFO_EMPTY);            }        }        list(, $userPlanList) = control_userBase::getUserPlanList($userInfo[control_user::TABLE_KEY]);        foreach($userPlanList as $plan) {            $baseId[] = $plan[control_userBase::TABLE_KEY];        }        list(,$basePlanList) = control_baseMoney::getListByIds($baseId);        $this->modelDisplay(array('userInfo' => $userInfo, 'userPlanList' => $userPlanList, 'basePlanList' => $basePlanList));    }}